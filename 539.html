<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  
  <!-- See: http://trac.edgewall.org/wiki/TracInterfaceCustomization -->


  <head>
    <title>
      #539 (For given file probe reports different pixels values between IJ1 &amp; IJ2.)
     â€“ ImageJ
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="trac.css" type="text/css" /><link rel="stylesheet" href="ticket.css" type="text/css" /><link rel="stylesheet" href="tracvote.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <div id="main">
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="/ticket/539">Ticket #539</a>
          <span class="status">(closed defect: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened 2011-05-23T15:31:26-05:00</p>
    <p>Last modified 2011-05-24T09:49:02-05:00</p>
  </div>
  <h2 class="summary searchable">For given file probe reports different pixels values between IJ1 &amp; IJ2.</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        bdezonia
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        bdezonia
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              major
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="/milestone/biweekly-2011%3A%20May-23%20to%20Jun-03">biweekly-2011: May-23 to Jun-03</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              Core
        </td>
        <th id="h_version">
          Version:
        </th>
        <td headers="h_version">
              
        </td>
    </tr><tr>
        <th id="h_severity">
          Severity:
        </th>
        <td headers="h_severity">
              serious
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby">
        </td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking">
        </td>
        <th>
        </th>
        <td>
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
The attached file displays differently in IJ1 &amp; IJ2. At first I thought it was a display only issue but the two programs report different values using their probe tools over background areas. There is one loner cell near the upper right corner where you can see pixel values of 7-40 in IJ1 that range all the way to 255 in IJ2. ANother way to see the data sifference is to run the sharpen command on each one. the output images are very dissimilar.<br />
</p>

    </div>
  </div>
</div>
          
    <div id="attachments">
        <h2 class="foldable">Attachments</h2>
        <div>
          <dl class="attachments">
              <dt>
    <a href="/attachment/ticket/539/EL_ImageToProcess2.png" title="View attachment">EL_ImageToProcess2.png</a>
      <a href="/raw-attachment/ticket/539/EL_ImageToProcess2.png" class="trac-rawlink" title="Download"><img src="/chrome/common/download.png" alt="Download" /></a>
       (<span title="320061 bytes">312.6 KB</span>) -
      added by <em>bdezonia</em> 2011-05-23T15:31:45-05:00.
  </dt>
          </dl>
          
        </div>
    </div>

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change">
                <h3 class="change">
                  Changed 2011-05-23T15:31:45-05:00 by bdezonia
                </h3>
                
  <ul class="changes">
    <li>
      <strong>attachment</strong>
        <a href="/attachment/ticket/539/EL_ImageToProcess2.png"><em>EL_ImageToProcess2.png</em></a>
          <a href="/raw-attachment/ticket/539/EL_ImageToProcess2.png" title="Download" class="trac-rawlink"><img src="/chrome/common/download.png" alt="Download" /></a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed 2011-05-23T15:47:26-05:00 by bdezonia
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Component</strong>
        changed from <em>ij-io</em> to <em>ij-core</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Did more thorough analysis. As loaded from disk these images are the same.<br />
</p>
<p>
Do a sharpen and they look completely different.<br />
</p>
<p>
Do a revert in IJ2 and some of the pixel values go from low values (3-7) to high values (243-255). Again you can see this by probing the inside of the cell that is a loner near the upper right corner.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed 2011-05-23T16:03:44-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
Two bugs here? Sharpen broken and revert failing?<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed 2011-05-23T16:34:40-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
This is indeed two bugs. I will open the sharpen issue as a different bug. It is related to convolution being different in IJ1 for different kinds of processors (byte/short/float). For the sake of this bug avoid using a convolution oriented data changers.<br />
</p>
<p>
So this bug is trying to figure out why revert does not restore original pixel values in IJ2.<br />
</p>
<p>
One can reproduce this issue by opening attached image in IJ2, using Process :: Math :: Set to change the pixel values to lets say 15. Then do a File :: Revert. The data is resoted to the screen correctly. But the probe is reporting the old values (15 everywhere).<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed 2011-05-23T16:49:57-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
It looks like Probe needs to listen for Dataset events and reset its working variables when this happens.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed 2011-05-24T09:49:02-05:00 by bdezonia
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>closed</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
fixed in 7cadcce428524a961cebf8761f93af945100b73c<br />
</p>

    </div>

              </div>
          </div>
        </div>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="/chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="/about"><strong>Trac 0.12.2</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the ImageJ project at<br /><a href="http://developer.imagej.net/">http://developer.imagej.net/</a></p>
    </div>
  </body>
</html>
