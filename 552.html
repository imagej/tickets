<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  
  <!-- See: http://trac.edgewall.org/wiki/TracInterfaceCustomization -->


  <head>
    <title>
      #552 (Make it possible to pass a ImgFactory to ImageTranslator::createDataset())
     â€“ ImageJ
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="trac.css" type="text/css" /><link rel="stylesheet" href="ticket.css" type="text/css" /><link rel="stylesheet" href="tracvote.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <div id="main">
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="/ticket/552">Ticket #552</a>
          <span class="status">(closed task: wontfix)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened 2011-05-31T15:31:57-05:00</p>
    <p>Last modified 2014-08-20T11:53:09-05:00</p>
  </div>
  <h2 class="summary searchable">Make it possible to pass a ImgFactory to ImageTranslator::createDataset()</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        bdezonia
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        bdezonia
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              major
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              imagej2-b8-analysis
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              Legacy Compatibility
        </td>
        <th id="h_version">
          Version:
        </th>
        <td headers="h_version">
              
        </td>
    </tr><tr>
        <th id="h_severity">
          Severity:
        </th>
        <td headers="h_severity">
              serious
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby">
        </td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking">
              <a class="closed" href="/ticket/1011" title="Robust ImageJ1 legacy layer">#1011</a>
        </td>
        <th>
        </th>
        <td>
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
RIght now ImageTranslator::createDataset() always makes a PlanarAccess backed Dataset. Allow user to specify a different kind of factory. Only makeExactDataset() when have PlanarAccess.<br />
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed 2011-06-21T14:34:33-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
Will also need to change Dataset::create() to take a factory. Could maintain current signature by having it always pass a PlanarImg factory to the general case signature.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed 2011-10-05T11:37:01-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
Above text is somewhat stale due to changes in architecture. This comment has the relevant info.<br />
</p>
<p>
In 9d915a1b9d8e5863d9b4d89ea8098c1949c2ac6f made a DatasetFactory::create() signature that can take any kind of ImgFactory. Allows us to create non-planar images.<br />
</p>
<p>
Still need to incorporate this into the legacy layer such that the translators can createDisplay()'s which are not planar backed structures.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed 2011-11-09T13:07:22-06:00 by bdezonia
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>imagej-2.0-beta1</em> to <em>imagej-2.0-beta2</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Started looking into this further. There is a fair amount of entanglement caused by the assumption that all datasets are PlanarImg backed. Allowing the type of factory to be passed around requires LegacyService and LegacyInjector to care about this which they shouldn't.<br />
</p>
<p>
I think the most straightforward fix is to have LegacyImageMap's registerLegacyImage() accept an ImageTranslator as a parameter. Thus is can be switched by API consumer (except for LegacyService which is a minor problem).<br />
</p>
<p>
The ImageTranslator would own an ImgFactory and know how to make the correct kind of display/dataset. The Dataset creation signatures have to change to take a factory too (current one is insufficent). So this requires some API change in the data model.<br />
</p>
<p>
Still its not a compatibility issue and poses no showstopper bugs. So I am pushing out of beta 1.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed 2011-11-09T13:17:46-06:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
I forgot to add that we should make it so that LegacyPlugin takes a factory or ImageTranslator as a constructor parameter (or via a setter). The default behavior would be to make PlanarImgs while other constructor/translaotr can make other types. Then for the single run of a LegacyPlugin all displays created would be backed by the given factory/translator.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed 2012-02-26T20:54:16-06:00 by curtis
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocking</strong>
        <em>1011</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed 2012-05-14T09:55:16-05:00 by bdezonia
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>imagej-2.0.0-beta3</em> to <em>imagej-2.0.0-beta4</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed 2012-09-10T09:10:49-05:00 by bdezonia
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>imagej-2.0.0-beta4</em> to <em>imagej-2.0.0-beta5</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed 2013-06-07T16:00:51-05:00 by bdezonia
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>imagej2-b7-ndim-data</em> to <em>imagej2-b8-analysis</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed 2014-08-20T11:53:09-05:00 by curtis
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>closed</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>wontfix</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
I don't understand the need for this work. If the original image object is an ImageJ 1.x ImagePlus, we will wrap it as an ImageJ2 PlanarImg. If the original image object is an ImageJ2 object which is not planar, we still want to wrap it a virtual ImagePlus. Either way, we now have successfully adapted and linked the data structures. It is not clear why we would need an automated factory-based mechanism to generalize creation of ImageJ2 data objects from ImageJ 1.x structures beyond that.<br />
</p>

    </div>

              </div>
          </div>
        </div>
    </div>
    </div>
  </body>
</html>
