<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  
  <!-- See: http://trac.edgewall.org/wiki/TracInterfaceCustomization -->


  <head>
    <title>
      #1295 (Exception error in Plot Z Profile)
     â€“ ImageJ
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="trac.css" type="text/css" /><link rel="stylesheet" href="ticket.css" type="text/css" /><link rel="stylesheet" href="tracvote.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <div id="main">
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="1295.html">Ticket #1295</a>
          <span class="status">(closed defect: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened 2012-07-09T11:59:14-05:00</p>
    <p>Last modified 2012-07-27T13:35:47-05:00</p>
  </div>
  <h2 class="summary searchable">Exception error in Plot Z Profile</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        bdezonia
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        bdezonia
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              major
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="/milestone/imagej2-b4-plugins">imagej2-b4-plugins</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              Legacy Compatibility
        </td>
        <th id="h_version">
          Version:
        </th>
        <td headers="h_version">
              
        </td>
    </tr><tr>
        <th id="h_severity">
          Severity:
        </th>
        <td headers="h_severity">
              serious
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby">
        </td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking">
              <a class="closed" href="1345.html" title="Fix obviously failing commands [plugins]">#1345</a>
        </td>
        <th>
        </th>
        <td>
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
      <span class="lastmod" title="2012-07-09 17:20:44.784842+00:00">
        (last modified by bdezonia)
      </span>
    </h3>
    <div class="searchable">
      <p>
Plot Z Profile works in general. But there is a sequence of events that throws an exception in the legacy layer<br />
</p>
<p>
WORKS<br />
Open Organ Of Corti<br />
Run Image &gt; Stacks &gt; Plot Z Profile<br />
</p>
<p>
BROKEN<br />
Open Organ Of Corti<br />
Run Image &gt; Stacks &gt; 3d Project and use all default settings<br />
Close results from previous command<br />
Run Image &gt; Stacks &gt; Plot Z Profile on original image<br />
Exception thrown:<br />
</p>
<p>
[ERROR] Uncaught exception in thread Thread[plugin thread,6,plugin thread group]<br />
java.lang.IllegalArgumentException: Pixel array is null<br />
</p>
<blockquote>
<p>
at ij.ImageStack.getProcessor(ImageStack.java:260)<br />
at imagej.legacy.translate.LegacyUtils.isBinary(LegacyUtils.java:415)<br />
at imagej.legacy.translate.Harmonizer.updateLegacyImage(Harmonizer.java:118)<br />
at imagej.legacy.plugin.LegacyPlugin$LegacyPluginThread.updateImagePlusesFromDisplays(LegacyPlugin.java:338)<br />
at imagej.legacy.plugin.LegacyPlugin$LegacyPluginThread.run(LegacyPlugin.java:179)<br />
</p>
</blockquote>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed 2012-07-09T12:20:44-05:00 by bdezonia
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Description</strong>
        modified
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed 2012-07-17T16:40:08-05:00 by bdezonia
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocking</strong>
        <em>1345</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed 2012-07-27T12:35:48-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
After debugging it is apparent that after calling the legacy plugin there are two displays open and they are each mapped to different ImagePluses but the two ImagePluses share the same ImageStack. Closing one nulls out the image data for the other. Determine why we are reusing an ImageSTack in two ImagePluses.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed 2012-07-27T13:35:47-05:00 by bdezonia
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>closed</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Fixed with commit fef45e2d9d69dcc8d0995f39fff442ef6c51d7e5<br />
</p>
<p>
Again another legacy layer change that will require testing<br />
</p>

    </div>

              </div>
          </div>
        </div>
    </div>
    </div>
  </body>
</html>
