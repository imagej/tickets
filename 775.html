<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  
  <!-- See: http://trac.edgewall.org/wiki/TracInterfaceCustomization -->


  <head>
    <title>
      #775 (Convert to 8-bit broken)
     â€“ ImageJ
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="trac.css" type="text/css" /><link rel="stylesheet" href="ticket.css" type="text/css" /><link rel="stylesheet" href="tracvote.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <div id="main">
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="/ticket/775">Ticket #775</a>
          <span class="status">(closed defect: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened 2011-09-22T12:06:25-05:00</p>
    <p>Last modified 2011-10-19T15:13:57-05:00</p>
  </div>
  <h2 class="summary searchable">Convert to 8-bit broken</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        afraser
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        bdezonia
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              critical
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="/milestone/imagej2-b1-initial">imagej2-b1-initial</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              Legacy Compatibility
        </td>
        <th id="h_version">
          Version:
        </th>
        <td headers="h_version">
              
        </td>
    </tr><tr>
        <th id="h_severity">
          Severity:
        </th>
        <td headers="h_severity">
              critical
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
              type, 8-bit
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby">
        </td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking">
        </td>
        <th>
        </th>
        <td>
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
      <span class="lastmod" title="2011-09-22 19:21:20+00:00">
        (last modified by afraser)
      </span>
    </h3>
    <div class="searchable">
      <p>
Open Clown.jpg<br />
Image &gt; Type &gt; 8-bit<br />
</p>
<p>
Duplicates the display and runs the command on each display.<br />
</p>
<p>
Looks to do the right thing, but when I open a histogram for the second display, it shows all values as being 0. Also running invert on the second display does nothing... this may be a problem with duplicate, since duplicating the original yields an image with the same strange properties (histogram = 0s, invert does nothing)<br />
</p>
<p>
tested with ff78f1f00c5069b267bd05ed9c5350c3100536f2<br />
</p>

    </div>
  </div>
</div>
          
    <div id="attachments">
        <h2 class="foldable">Attachments</h2>
        <div>
          <dl class="attachments">
              <dt>
    <a href="/attachment/ticket/775/Screen%20shot%202011-09-22%20at%201.01.38%20PM.png" title="View attachment">Screen shot 2011-09-22 at 1.01.38 PM.png</a>
      <a href="/raw-attachment/ticket/775/Screen%20shot%202011-09-22%20at%201.01.38%20PM.png" class="trac-rawlink" title="Download"><img src="/chrome/common/download.png" alt="Download" /></a>
       (<span title="160904 bytes">157.1 KB</span>) -
      added by <em>afraser</em> 2011-09-22T12:07:29-05:00.
  </dt>
              <dd>
                results of converting clown to 8-bit
              </dd>
          </dl>
          
        </div>
    </div>

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change">
                <h3 class="change">
                  Changed 2011-09-22T12:07:29-05:00 by afraser
                </h3>
                
  <ul class="changes">
    <li>
      <strong>attachment</strong>
        <a href="/attachment/ticket/775/Screen%20shot%202011-09-22%20at%201.01.38%20PM.png"><em>Screen shot 2011-09-22 at 1.01.38 PM.png</em></a>
          <a href="/raw-attachment/ticket/775/Screen%20shot%202011-09-22%20at%201.01.38%20PM.png" title="Download" class="trac-rawlink"><img src="/chrome/common/download.png" alt="Download" /></a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
results of converting clown to 8-bit<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed 2011-09-22T12:19:32-05:00 by afraser
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Component</strong>
        changed from <em>other</em> to <em>ij-legacy</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed 2011-09-22T14:21:20-05:00 by afraser
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Description</strong>
        modified
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed 2011-10-18T15:07:26-05:00 by curtis
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Owner</strong>
        changed from <em>curtis</em> to <em>bdezonia</em>
    </li><li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>assigned</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Likely an issue with the legacy layer translation.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed 2011-10-19T12:19:16-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
adam, I'm assuming you mean Image &gt; Type &gt; 8-bit color. Right?<br />
</p>
<p>
the second histogram all zero issue cannot be duplicated in 889f659ad129af101686052ec4150648302ed54e. it's possible it was fixed by bug fix for <a class="closed ticket" href="/ticket/831" title="defect: Scaling an new IJ2 image results in a black image (closed: fixed)">#831</a>. also can invert resulting image.<br />
</p>
<p>
am getting a plugin exception that keeps lut from being updated correctly. images look nothing like your PNG attachment.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed 2011-10-19T12:21:53-05:00 by curtis
                </h3>
                
    <div class="comment searchable">
      
      <p>
This bug is for the "8-bit" command, not "8-bit color." You will need to disable the blacklist in order to try it.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed 2011-10-19T13:06:57-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
okay, unblacklisted 8-bit and here is how things stand:<br />
</p>
<ul><li>we are getting two images rather than one
</li><li>the second histogram issue is indeed now gone
</li><li>each image inverts. if you invert one image and then switch to the other it won't invert until you run the command twice.
</li><li>plugin exception is indeed still happening:
</li></ul><p>
[ERROR] ImageJ 1.x plugin threw exception<br />
java.lang.ArrayIndexOutOfBoundsException: 2<br />
</p>
<blockquote>
<p>
at net.imglib2.AbstractInterval.dimension(AbstractInterval.java:184)<br />
at imagej.data.display.AbstractDatasetView.getChannelCount(AbstractDatasetView.java:330)<br />
at imagej.data.display.AbstractDatasetView.updateLUTs(AbstractDatasetView.java:308)<br />
at imagej.data.display.AbstractDatasetView.setColorTable(AbstractDatasetView.java:127)<br />
at imagej.legacy.translate.ColorTableHarmonizer.assignColorTables(ColorTableHarmonizer.java:259)<br />
at imagej.legacy.translate.ColorTableHarmonizer.updateDisplay(ColorTableHarmonizer.java:74)<br />
at imagej.legacy.translate.Harmonizer.updateDisplay(Harmonizer.java:157)<br />
at imagej.legacy.plugin.LegacyPlugin.updateDisplaysFromImagePluses(LegacyPlugin.java:207)<br />
at imagej.legacy.plugin.LegacyPlugin.run(LegacyPlugin.java:135)<br />
at imagej.ext.plugin.PluginModule.run(PluginModule.java:174)<br />
at imagej.ext.module.ModuleRunner.run(ModuleRunner.java:148)<br />
at imagej.ext.module.ModuleRunner.call(ModuleRunner.java:118)<br />
at imagej.ext.module.ModuleRunner.call(ModuleRunner.java:1)<br />
</p>
</blockquote>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed 2011-10-19T15:13:57-05:00 by bdezonia
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>assigned</em> to <em>closed</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
All issues cleared up with one line fix in 9ecb3078dc1f5da7f4ab7137cc32aa9148d00064<br />
</p>

    </div>

              </div>
          </div>
        </div>
    </div>
    </div>
  </body>
</html>
