<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  
  <!-- See: http://trac.edgewall.org/wiki/TracInterfaceCustomization -->


  <head>
    <title>
      #965 (IJ2 does not track color just like IJ1)
     – ImageJ
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="trac.css" type="text/css" /><link rel="stylesheet" href="ticket.css" type="text/css" /><link rel="stylesheet" href="tracvote.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <div id="main">
    <div id="notice" style="width: 58em; max-width: 100%; margin-left: auto; margin-right: auto; border: 1px solid black; margin-bottom: 2em">
      <table>
        <tr>
          <td style="font-size: 72px; color: firebrick; padding: 0 10px 0 10px">&#9888;</td>
          <td>
            <p style="margin: 0.4em">
            NOTICE! This is a static HTML version of a legacy ImageJ Trac ticket.
            </p>
            <p style="margin: 0.4em">
            The ImageJ project now
            <a href="https://imagej.net/Issues">uses GitHub Issues</a> for issue tracking.
            </p>
            <p style="margin: 0.4em">
            Please
            <a href="https://github.com/imagej/imagej/issues/new">file all new issues</a>
            there.
            </p>
          </td>
        </tr>
      </table>
    </div>
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="965.html">Ticket #965</a>
          <span class="status">(closed defect: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened 2012-02-09T14:39:29-06:00</p>
    <p>Last modified 2012-03-06T17:57:31-06:00</p>
  </div>
  <h2 class="summary searchable">IJ2 does not track color just like IJ1</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        bdezonia
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        bdezonia
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              major
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <strike>imagej2-b1-initial</strike>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              Legacy Compatibility
        </td>
        <th id="h_version">
          Version:
        </th>
        <td headers="h_version">
              
        </td>
    </tr><tr>
        <th id="h_severity">
          Severity:
        </th>
        <td headers="h_severity">
              serious
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby">
        </td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking">
        </td>
        <th>
        </th>
        <td>
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
      <span class="lastmod" title="2012-02-09 20:52:04.150885+00:00">
        (last modified by bdezonia)
      </span>
    </h3>
    <div class="searchable">
      <p>
In IJ1 we track fg/bg colors.<br />
</p>
<p>
In IJ2 the gray values and the color values are tracked as separate items. There are two places that update them (the PickerTool and the OptionsColors dialog).<br />
</p>
<p>
It turns out that IJ1 relies on foreground and background color always being tracked. If not then running plugins like Clear and Clear Outside can fill with an unexpected color. OptionsSynchronizer does not handle translation of its fg/bg gray values to colors in IJ1.<br />
</p>
<p>
It's not clear whether this is something for user to adapt to or if its a bug to fix.<br />
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed 2012-02-09T14:52:04-06:00 by bdezonia
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Description</strong>
        modified
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed 2012-02-17T12:32:26-06:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
See also <a class="closed ticket" href="926.html" title="defect: Drawing tools limitation with composite images (closed: fixed)">#926</a> and <a class="closed ticket" href="967.html" title="defect: The Edit &gt; Draw command can draw in the wrong color (closed: fixed)">#967</a><br />
</p>

    </div>

                <div class="trac-lastedit ">
                  Last edited 2012-02-17T12:47:25-06:00
                      by bdezonia
                </div>
              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed 2012-02-17T12:33:01-06:00 by bdezonia
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>imagej-2.0-beta2</em> to <em>imagej-2.0-beta1</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed 2012-02-27T11:00:59-06:00 by curtis
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>imagej-2.0-beta1</em> to <em>imagej-2.0-beta2</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed 2012-02-28T09:18:18-06:00 by bdezonia
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Milestone</strong>
        changed from <em>imagej-2.0-beta2</em> to <em>imagej-2.0-beta1</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="#comment:6">comment:6</a>
    </span>
                          <span>follow-up:</span>
      <a href="#comment:7">↓ 7</a>
                  </span>
                  Changed 2012-03-02T15:10:31-06:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
After discussion we've determined that IJ2 will not really track colors like IJ1.<br />
</p>
<p>
The color picker functionality will record all the channel values at a given pixel location.<br />
It's configure() code will call OptionsColors dialog.<br />
The OptionsColors dialog (to be renamed) will show two lists of channels ("foreground" and "background")<br />
For beta 1 each list of channel values will be a comma separated string of values<br />
Eventually we'll want a list of doubles which we will support with a new dialog widget yet to be done<br />
When the picker is run besides recording channel values it will remember the best color from the view<br />
It is this color that will get synched from IJ2 to IJ1<br />
We will not synch IJ1 colors back to IJ2 since information would get lost<br />
When drawing in IJ2 using the current channel values:<br />
</p>
<ul><li>if target image has more channels than current values then zero fill
</li><li>if target image has fewer channels than current values then grab 1st n
</li></ul><p>
Assigned pixels will clamp the input channel values if they are out of bounds for the target type when assigning pixels<br />
We could consider scaling rather than clamping.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="#comment:7">comment:7</a>
    </span>
                        in reply to:
      <a href="#comment:6">↑ 6</a>
                  </span>
                  Changed 2012-03-02T15:25:13-06:00 by curtis
                </h3>
                
    <div class="comment searchable">
      
      <p>
Replying to <a href="965.html#comment:6" title="Comment 6 for Ticket #965">bdezonia</a>:<br />
</p>
<blockquote class="citation">
<p>
Eventually we'll want a list of doubles which we will support with a new dialog widget yet to be done<br />
</p>
</blockquote>
<p>
This work is described in ticket <a class="closed ticket" href="792.html" title="enhancement: Support for List as an input type (closed: moved)">#792</a>.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed 2012-03-06T17:57:31-06:00 by bdezonia
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>closed</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
This ticket is complete via numerous changes beginning with bffaa4924a99baa82b760b98030d3d00b465ff67 and ending in 3ff92047937688a9030553480272dd563e71a1ff<br />
</p>

    </div>

              </div>
          </div>
        </div>
    </div>
    </div>
  </body>
</html>
