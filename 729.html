<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  
  <!-- See: http://trac.edgewall.org/wiki/TracInterfaceCustomization -->


  <head>
    <title>
      #729 (Imglib OPS enhancement ideas)
     â€“ ImageJ
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="trac.css" type="text/css" /><link rel="stylesheet" href="ticket.css" type="text/css" /><link rel="stylesheet" href="tracvote.css" type="text/css" />
    <script type="text/javascript">
      var auto_preview_timeout=2.0;
      var form_token="3143776f328348ce10ea8c66";
    </script>
    <script type="text/javascript" src="/chrome/common/js/jquery.js"></script><script type="text/javascript" src="/chrome/common/js/babel.js"></script><script type="text/javascript" src="/chrome/common/js/trac.js"></script><script type="text/javascript" src="/chrome/common/js/search.js"></script><script type="text/javascript" src="/chrome/common/js/folding.js"></script><script type="text/javascript" src="/chrome/common/js/wikitoolbar.js"></script><script type="text/javascript" src="/chrome/common/js/resizer.js"></script><script type="text/javascript" src="/chrome/common/js/auto_preview.js"></script>
    <!--[if lt IE 7]>
    <script type="text/javascript" src="/chrome/common/js/ie_pre7_hacks.js"></script>
    <![endif]-->
    <script type="text/javascript">
      jQuery(document).ready(function($) {
        $("div.description").find("h1,h2,h3,h4,h5,h6").addAnchor(_("Link to this section"));
        $(".foldable").enableFolding(false, true);
        var args = {realm: "ticket", id: 729, escape_newlines: 1}
        $("#comment").autoPreview("/wiki_render", args, function(textarea, text, rendered) {
            $("#ticketchange div.comment").html(rendered);
            if (rendered)
              $("#ticketchange").show();
            else if ($("#ticketchange ul.changes").length == 0)
              $("#ticketchange").hide();
        });
        $("#trac-comment-editor textarea").autoPreview("/wiki_render", args,
                                                       function(textarea, text, rendered) {
          var comment = $("#trac-comment-editor").next("div.comment");
          comment.html(rendered);
          if (rendered)
            comment.show();
          else
            comment.hide();
        });
        $("#modify").parent().toggleClass("collapsed");
        $(".trac-topnav a").click(function() { $("#modify").parent().removeClass("collapsed"); });
        /* only enable control elements for the currently selected action */
        var actions = $("#action input[name='action']");
        function updateActionFields() {
          actions.each(function () {
            $(this).siblings().find("*[id]").enable($(this).checked());
            $(this).siblings().filter("*[id]").enable($(this).checked());
          });
        }
        actions.click(updateActionFields);
        updateActionFields();
      });
    </script>
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <div id="main">
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="/ticket/729">Ticket #729</a>
          <span class="status">(new feature)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened 2011-08-17T14:21:51-05:00</p>
    <p>Last modified 2012-12-06T11:21:08-06:00</p>
  </div>
  <h2 class="summary searchable">Imglib OPS enhancement ideas</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        <a href="/query?status=!closed&amp;reporter=bdezonia">bdezonia</a>
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        <a href="/query?status=!closed&amp;owner=bdezonia">bdezonia</a>
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              <a href="/query?status=!closed&amp;priority=major">major</a>
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="milestone" href="/milestone/imagej-2.0.0">imagej-2.0.0</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              <a href="/query?status=!closed&amp;component=ImgLib2">ImgLib2</a>
        </td>
        <th id="h_version">
          Version:
        </th>
        <td headers="h_version">
              <a href="/query?status=!closed&amp;version"></a>
        </td>
    </tr><tr>
        <th id="h_severity">
          Severity:
        </th>
        <td headers="h_severity">
              <a href="/query?status=!closed&amp;severity=serious">serious</a>
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby">
        </td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking">
        </td>
        <th>
        </th>
        <td>
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
This ticket is an idea dump. New separate tickets should be hatched and tackled as appropriate. Ideas for enhancement:<br />
</p>
<p>
IJ2 uses a lot of unary operations. A lot of these operations could be converted to binary operations between a ConstantFunction and the existing ImageFunction.<br />
</p>
<p>
Make a function that is a composition of other functions (ComposedFunction). It maintains a local neighborhood for each subfunction and delegates evaluate() calls to the correct subfunction.<br />
</p>
<p>
Given composed function idea it might be useful to track a functions domain and compose from domain compatible functions.<br />
</p>
<p>
Make a PointNeighborhood which is a neighborhood whose neg &amp; pos offets are all zero. Could hatch its own high speed iterator.<br />
</p>
<p>
Find ways to performance improve the RealAverage &amp; RealMedian functions. Median does a sort when it could find a faster means of finding the middle value(s). Knuth has such algorithms.<br />
</p>
<p>
Make an Int class (like Bool, Real, Complex)? These might go away and transition to RealType, ShortType, Floattype, etc.<br />
</p>
<p>
Flesh out numerous examples showing discrete integration, conditional assignment within the intersection of an ellipse and a square, hilighting all pixels on the border of a binary figure in an image, etc. <br />
</p>
<p>
Old revisions had some ideas not yet present:<br />
</p>
<ul><li>boolean b = function.canAccept(numDimensions)
</li><li>functions that return a vector of primitive values
</li><li>a function that returns the distance from a fixed point
</li><li>the ability to pass a NullFunction to an ImageAssignement and collect stats via an Observer. Make these assigners handle Observers
</li><li>make assigners interruptable
</li></ul><p>
Make this code multithreaded. Need to expand Function definition to have a duplicate() method. For each processor you duplicate() a function and pass each function to its own thread. They work on different parts of output image. Each cursor lives in its own thread this way.<br />
</p>
<p>
Play with Complex and Continuous functions. See how we can take advantage of this.<br />
</p>
<p>
I have many notes in a workbook at home that should be gleaned for further ideas.<br />
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed 2011-09-14T10:52:23-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
A simple implementation of ComposedFunction is complete.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed 2011-09-21T22:11:13-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
More ideas:<br />
</p>
<ul><li>make a bunch of operations of type &lt;Complex,Real&gt; such as abs()/modulus()/magnitude(), arg(), real(), imag(), etc.
</li></ul><ul><li>make a sinc(pi*m) function
</li></ul>
    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed 2011-10-03T13:26:18-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
Image assignment classes (Real and Complex) were made multithreaded recently.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed 2012-05-14T14:34:06-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
Note that once could find commonality between a UnaryRelation and a Condition. These might be two ways of looking at the same concept. See if we can eliminate one of them.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed 2012-05-14T14:35:27-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
There are two kinds of functions right now: Function&lt;long[],T&gt; and Function&lt;PointSet,T&gt;. Note that in the long[] case it is a PointSet of one point represented as a long[]. Maybe we can get rid of the distinction.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed 2012-05-14T14:36:01-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
Much documentation is needed for the code<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed 2012-05-14T14:38:44-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
It would be nice if we could use partial coordinate specification. By this I mean what if we defined a 5d space and then partially specified an axis at a time (like just x, y, and c) and asked for median. The median func would sum on all ZT points with the XYC values already determined. This would simplify the definition of functions in general. They iterate all dims not specified.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed 2012-05-14T14:40:26-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
When PointSets went into OPS the ContinuousNeighborhood code disappeared. Think how PointSets (or in the future ProbabilityMaps) would work in a continuous space rather than dicrete long[]'s.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-9">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:9" class="cnum">
      <a href="#comment:9">comment:9</a>
    </span>
                  </span>
                  Changed 2012-05-14T14:43:23-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
When PointSets and InputIterators were adopted we lost code that allowed functions to reason about the relationship between a point and its surrounding neighborhood. I have maintained the idea by writing some functions and/or conditions such as Condition&lt;Tuple2&lt;long[],PointSet&gt;&gt;. The code compiles but there is no actual InputIterator defined to walk data in this fashion. Implement such code.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-10">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:10" class="cnum">
      <a href="#comment:10">comment:10</a>
    </span>
                  </span>
                  Changed 2012-12-06T11:21:08-06:00 by bdezonia
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Type</strong>
        changed from <em>enhancement</em> to <em>feature</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="/wiki/TracTickets">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="/ticket/729?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="/ticket/729?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="/ticket/729?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="/chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="/about"><strong>Trac 0.12.2</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the ImageJ project at<br /><a href="http://developer.imagej.net/">http://developer.imagej.net/</a></p>
    </div>
  </body>
</html>
