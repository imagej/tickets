<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  
  <!-- See: http://trac.edgewall.org/wiki/TracInterfaceCustomization -->


  <head>
    <title>
      #1653 (Add BigInteger and BigDecimal numerical types)
     – ImageJ
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="trac.css" type="text/css" /><link rel="stylesheet" href="ticket.css" type="text/css" /><link rel="stylesheet" href="tracvote.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <div id="main">
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="/ticket/1653">Ticket #1653</a>
          <span class="status">(closed feature: moved)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened 2013-02-21T15:46:44-06:00</p>
    <p>Last modified 2013-08-01T13:57:12-05:00</p>
  </div>
  <h2 class="summary searchable">Add BigInteger and BigDecimal numerical types</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        curtis
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        curtis
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              major
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              imagej2-b8-analysis
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              ImgLib2
        </td>
        <th id="h_version">
          Version:
        </th>
        <td headers="h_version">
              
        </td>
    </tr><tr>
        <th id="h_severity">
          Severity:
        </th>
        <td headers="h_severity">
              non-issue
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby">
        </td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking">
        </td>
        <th>
        </th>
        <td>
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
The ImgLib2 library has type-agnostic support for numerical data processing. As such, it would be great to have numerical types based on Java's <tt>BigInteger</tt> and <tt>BigDecimal</tt>, for arbitrary-precision integer- and real-valued numbers, respectively.<br />
</p>
<p>
Implementing this feature will first require the types to exist within ImgLib2. Then we will need to write additional converter plugins (for the Image &gt; Type menu) as well as ensure that ImageJ2's core numerical commands are well-tested with the new types. Right now, many plugins "cheat" by operating on doubles, which would defeat the purpose of the new types.<br />
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed 2013-05-14T14:35:04-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
In order to avoid working in doubles we'll also have to provide methods of calculation of basic math functions (like Math.sin(), Math.exp(), Math.log()). This was part of what the types-experiment branch of imglib2 was investigating.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed 2013-07-10T12:04:12-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
Some work towards this is done on the data-types branch including Image &gt; Type &gt; Change plugin and BigInteger and BigDecimal backed types (in imagej packages not imglib). See also ticket <a class="closed ticket" href="/ticket/1702" title="feature: Make pixel types extensible (closed: fixed)">#1702</a>.<br />
</p>

    </div>

                <div class="trac-lastedit ">
                  Last edited 2013-07-10T12:04:54-05:00
                      by bdezonia
                </div>
              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed 2013-07-12T10:42:40-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
The two "big" DataTypes in the data-types branch have a current limitation that makes them unusable by IJ2. IJ2 expects Datasets to support RealType and NativeType. The two types can fake RealType (through narrowing data manipulations of doubles and longs) but they can't fake NativeType. We need to eliminate the NativeType requirement of Dataset.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed 2013-07-12T17:13:23-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
Also note as part of merging <a class="closed ticket" href="/ticket/1702" title="feature: Make pixel types extensible (closed: fixed)">#1702</a> to master I commented out the @Plugin annotation to the four as yet unsupportable DataTypes (the two complex types and the two unbounded types). When we are ready to support these classes simply reenable the @Plugin annotation in each of these DataTypes and they will be discovered by NewImage and TypeChanger. Of course we need to make changes to IJ2 to allow Datasets of these types to be constructed.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-5">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:5" class="cnum">
      <a href="#comment:5">comment:5</a>
    </span>
                  </span>
                  Changed 2013-08-01T10:43:48-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
A BigDecimal backed type cannot be implemented in a naive way. Take an BigDecimal and divide by 3. An exception is thrown due to repeating decimal expansion.<br />
</p>
<p>
Our "unlimited" decimal precision class will likely need to be a fixed point representation with some number of decimal places supported (i.e. like 50) rather than BigDecimal backed.<br />
</p>
<p>
This is already true of the implementation for sqrt() and atan2(). And more if we add other floating operations.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-6">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:6" class="cnum">
      <a href="#comment:6">comment:6</a>
    </span>
                  </span>
                  Changed 2013-08-01T10:52:20-05:00 by curtis
                </h3>
                
    <div class="comment searchable">
      
      <blockquote class="citation">
<p>
Our "unlimited" decimal precision class will likely need to be a fixed point representation<br />
</p>
</blockquote>
<p>
Indeed. Perhaps we can have ImageJ prompt the user for the number of significant digits of precision, when converting to that type. This would be a great feature.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-7">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:7" class="cnum">
      <a href="#comment:7">comment:7</a>
    </span>
                  </span>
                  Changed 2013-08-01T13:57:12-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
With commit 331ddf635c0bebe61d51bab1859620bb1fe0ef1e we have a basic fixed point class in place for later use. It needs to be extended to support Imglib's FloatingType when that code is merged to master. Number of decimal places is fixed at 25 places but could be extended to be configurable.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-8">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:8" class="cnum">
      <a href="#comment:8">comment:8</a>
    </span>
                  </span>
                  Changed 2014-11-25T16:28:23-06:00 by curtis
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>closed</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>moved</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Migrated to <a class="ext-link" href="https://github.com/imagej/imagej-common/issues/35"><span class="icon"> </span>https://github.com/imagej/imagej-common/issues/35</a><br />
</p>

    </div>

              </div>
          </div>
        </div>
      <div id="help"><strong>Note:</strong> See
        <a href="/wiki/TracTickets">TracTickets</a> for help on using
        tickets.</div>
    </div>
    <div id="altlinks">
      <h3>Download in other formats:</h3>
      <ul>
        <li class="first">
          <a rel="nofollow" href="/ticket/1653?format=csv" class="csv">Comma-delimited Text</a>
        </li><li>
          <a rel="nofollow" href="/ticket/1653?format=tab" class="tab">Tab-delimited Text</a>
        </li><li class="last">
          <a rel="nofollow" href="/ticket/1653?format=rss" class="rss">RSS Feed</a>
        </li>
      </ul>
    </div>
    </div>
    <div id="footer" lang="en" xml:lang="en"><hr />
      <a id="tracpowered" href="http://trac.edgewall.org/"><img src="/chrome/common/trac_logo_mini.png" height="30" width="107" alt="Trac Powered" /></a>
      <p class="left">Powered by <a href="/about"><strong>Trac 0.12.2</strong></a><br />
        By <a href="http://www.edgewall.org/">Edgewall Software</a>.</p>
      <p class="right">Visit the ImageJ project at<br /><a href="http://developer.imagej.net/">http://developer.imagej.net/</a></p>
    </div>
  </body>
</html>
