<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  
  <!-- See: http://trac.edgewall.org/wiki/TracInterfaceCustomization -->


  <head>
    <title>
      #1870 (SCIFIO barfs on this PNG file)
     â€“ ImageJ
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="trac.css" type="text/css" /><link rel="stylesheet" href="ticket.css" type="text/css" /><link rel="stylesheet" href="tracvote.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <div id="main">
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="1870.html">Ticket #1870</a>
          <span class="status">(closed defect: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened 2013-05-14T14:56:54-05:00</p>
    <p>Last modified 2013-06-04T11:44:13-05:00</p>
  </div>
  <h2 class="summary searchable">SCIFIO barfs on this PNG file</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        bdezonia
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        hinerm
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              major
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <a class="closed milestone" href="/milestone/imagej2-b7-ndim-data">imagej2-b7-ndim-data</a>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              SCIFIO
        </td>
        <th id="h_version">
          Version:
        </th>
        <td headers="h_version">
              
        </td>
    </tr><tr>
        <th id="h_severity">
          Severity:
        </th>
        <td headers="h_severity">
              serious
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby">
        </td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking">
              <a class="closed" href="1563.html" title="Fix obviously failing commands [ndim-data]">#1563</a>
        </td>
        <th>
        </th>
        <td>
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
I'm on the scifiocells branches. The attached PNG, which opens fine in IJ1, causes an exception to be thrown in IJ2<br />
</p>
<p>
java.lang.ArrayIndexOutOfBoundsException: 258<br />
</p>
<blockquote>
<p>
at ome.scifio.formats.APNGFormat$Parser.typedParse(APNGFormat.java:481)<br />
at ome.scifio.formats.APNGFormat$Parser.typedParse(APNGFormat.java:1)<br />
at ome.scifio.AbstractParser.parse(AbstractParser.java:371)<br />
at ome.scifio.AbstractParser.parse(AbstractParser.java:115)<br />
at ome.scifio.AbstractParser.parse(AbstractParser.java:1)<br />
at ome.scifio.AbstractReader.setSource(AbstractReader.java:251)<br />
at ome.scifio.services.DefaultInitializeService.initializeReader(DefaultInitializeService.java:98)<br />
at ome.scifio.io.img.ImgOpener.createReader(ImgOpener.java:450)<br />
at ome.scifio.io.img.ImgOpener.initializeReader(ImgOpener.java:515)<br />
at ome.scifio.io.img.ImgOpener.openImg(ImgOpener.java:288)<br />
at ome.scifio.io.img.ImgOpener.openImg(ImgOpener.java:240)<br />
at imagej.io.DefaultIOService.loadDataset(DefaultIOService.java:166)<br />
at imagej.io.DefaultIOService.load(DefaultIOService.java:124)<br />
at imagej.core.commands.io.OpenFile.run(OpenFile.java:87)<br />
at imagej.command.CommandModule.run(CommandModule.java:163)<br />
at imagej.module.ModuleRunner.run(ModuleRunner.java:169)<br />
at imagej.module.ModuleRunner.call(ModuleRunner.java:126)<br />
at imagej.module.ModuleRunner.call(ModuleRunner.java:1)<br />
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)<br />
at java.util.concurrent.FutureTask.run(FutureTask.java:138)<br />
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:895)<br />
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:918)<br />
at java.lang.Thread.run(Thread.java:680)<br />
</p>
</blockquote>

    </div>
  </div>
</div>
          
    <div id="attachments">
        <h2 class="foldable">Attachments</h2>
        <div>
          <dl class="attachments">
              <dt>
    <a href="/attachment/ticket/1870/EL_ImageToProcess2.png" title="View attachment">EL_ImageToProcess2.png</a>
      <a href="/raw-attachment/ticket/1870/EL_ImageToProcess2.png" class="trac-rawlink" title="Download"><img src="/chrome/common/download.png" alt="Download" /></a>
       (<span title="320061 bytes">312.6 KB</span>) -
      added by <em>bdezonia</em> 2013-05-14T14:57:24-05:00.
  </dt>
          </dl>
          
        </div>
    </div>

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change">
                <h3 class="change">
                  Changed 2013-05-14T14:57:24-05:00 by bdezonia
                </h3>
                
  <ul class="changes">
    <li>
      <strong>attachment</strong>
        <a href="/attachment/ticket/1870/EL_ImageToProcess2.png"><em>EL_ImageToProcess2.png</em></a>
          <a href="/raw-attachment/ticket/1870/EL_ImageToProcess2.png" title="Download" class="trac-rawlink"><img src="/chrome/common/download.png" alt="Download" /></a>
          added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed 2013-05-15T10:07:20-05:00 by hinerm
                </h3>
                
    <div class="comment searchable">
      
      <p>
The PLTE parsing wasn't dividing array indices.. so if the PLTE length was 768, it would try to populate 3x size 256 arrays at indices 0, 3, 6.. up to 768.<br />
</p>
<p>
Fixed now to populate indices 0, 1, 2... up to the actual lut length and not the combined lut length.<br />
</p>
<p>
Works locally on latest scifiocells branch.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed 2013-05-17T14:48:02-05:00 by bdezonia
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocking</strong>
        <em>1563</em> added; <em>1457</em> removed
    </li><li>
      <strong>Milestone</strong>
        changed from <em>imagej2-b8-analysis</em> to <em>imagej2-b7-ndim-data</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed 2013-05-17T15:16:12-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
Verified the fix works on the upstream branch of scfio-cells. When merged to master this ticket can close.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed 2013-06-04T11:44:13-05:00 by bdezonia
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>closed</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
Merged. Closing.<br />
</p>

    </div>

              </div>
          </div>
        </div>
    </div>
    </div>
  </body>
</html>
