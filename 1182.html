<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
  
  

  
  <!-- See: http://trac.edgewall.org/wiki/TracInterfaceCustomization -->


  <head>
    <title>
      #1182 (Decide on how to implement menus)
     â€“ ImageJ
    </title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
        <link rel="stylesheet" href="trac.css" type="text/css" /><link rel="stylesheet" href="ticket.css" type="text/css" /><link rel="stylesheet" href="tracvote.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <body>
    <div id="main">
    <div id="content" class="ticket">
      <h1 id="trac-ticket-title">
          <a href="1182.html">Ticket #1182</a>
          <span class="status">(closed task: fixed)</span>
      </h1>
      <div id="ticket">
  <div class="date">
    <p>Opened 2012-05-16T10:31:19-05:00</p>
    <p>Last modified 2012-06-26T10:56:32-05:00</p>
  </div>
  <h2 class="summary searchable">Decide on how to implement menus</h2>
  <table class="properties">
    <tr>
      <th id="h_reporter">Reported by:</th>
      <td headers="h_reporter" class="searchable">
        bdezonia
      </td>
      <th id="h_owner">Owned by:</th>
      <td headers="h_owner">
        bdezonia
      </td>
    </tr>
    <tr>
        <th id="h_priority">
          Priority:
        </th>
        <td headers="h_priority">
              major
        </td>
        <th id="h_milestone">
          Milestone:
        </th>
        <td headers="h_milestone">
              <strike>imagej2-b3-headless</strike>
        </td>
    </tr><tr>
        <th id="h_component">
          Component:
        </th>
        <td headers="h_component">
              Core
        </td>
        <th id="h_version">
          Version:
        </th>
        <td headers="h_version">
              
        </td>
    </tr><tr>
        <th id="h_severity">
          Severity:
        </th>
        <td headers="h_severity">
              serious
        </td>
        <th id="h_keywords">
          Keywords:
        </th>
        <td headers="h_keywords" class="searchable">
        </td>
    </tr><tr>
        <th id="h_cc">
          Cc:
        </th>
        <td headers="h_cc" class="searchable">
              curtis, dscho
        </td>
        <th id="h_blockedby">
          Blocked By:
        </th>
        <td headers="h_blockedby">
              <a class="closed" href="1160.html" title="Menu bar creation is slow">#1160</a>, <a class="closed" href="1161.html" title="Use Application default JMenuBar on Mac">#1161</a>
        </td>
    </tr><tr>
        <th id="h_blocking">
          Blocking:
        </th>
        <td headers="h_blocking">
              <a class="closed" href="1162.html" title="Improve menuing system [headless]">#1162</a>
        </td>
        <th>
        </th>
        <td>
        </td>
    </tr>
  </table>
  <div class="description">
    <h3 id="comment:description">
      Description
    </h3>
    <div class="searchable">
      <p>
Currently menus are supported differently by platform. On the Mac they are duplicated (one per display). On Windows there is only one. The duplication causes performance problems for some commands (like Stack To Images).<br />
</p>
<p>
Anyhow we may want to move to a model where there is a default menu and additional menus for contexts that need them (such as the script editor). We would need a facility for swapping menus when the active window changed. And we also would want that action to update some of the values in the default menu if needed (such as marking image type in the image menu and active window in the window menu).<br />
</p>
<p>
However we may want to support duplication of menus across all platforms (via an option setting) so that there is one menu per window regardless of platform. If so we need an efficient implementation.<br />
</p>
<p>
There are multiple other menu tickets that are related to these problems and are marked as blockers here.<br />
</p>

    </div>
  </div>
</div>
          

        <div>
          <h2 class="foldable">Change History</h2>
          <div id="changelog">
              <div class="change" id="trac-change-1">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:1" class="cnum">
      <a href="#comment:1">comment:1</a>
    </span>
                  </span>
                  Changed 2012-05-16T10:32:32-05:00 by bdezonia
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocked By</strong>
        <em>1160</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed 2012-05-16T10:33:30-05:00 by bdezonia
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Blocked By</strong>
        <em>1161</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-2">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:2" class="cnum">
      <a href="#comment:2">comment:2</a>
    </span>
                  </span>
                  Changed 2012-05-17T13:37:26-05:00 by curtis
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Type</strong>
        changed from <em>feature</em> to <em>task</em>
    </li><li>
      <strong>Blocking</strong>
        <em>1162</em> added
    </li>
  </ul>
    <div class="comment searchable">
      
      
    </div>

              </div>
              <div class="change" id="trac-change-3">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:3" class="cnum">
      <a href="#comment:3">comment:3</a>
    </span>
                  </span>
                  Changed 2012-06-11T13:36:40-05:00 by bdezonia
                </h3>
                
    <div class="comment searchable">
      
      <p>
After some discussion with Curtis we have a plan. We will default to a single shared application menu (using the approach of the fix-menus branch). Other windows/frames can override the active menu with their own. Thus in the short term we won't have to worry about menu synching. The entries and check boxes for the window menu and the image type will exist in one place and will be updated by window change events.<br />
</p>
<p>
The current code in the fix-menus branch is a kludge to prove one single menu bar could be supported on the mac. It waits to create a single menubar after the legacy service has loaded so that the shadow menu is fully populated before the one menu bar is created. We need a more robust approach. The plan is to have the service initialization code emit a AllServicesInitializedEvent. Then the UI can wait on that event before creating the menubar.<br />
</p>
<p>
By going this direction we need to keep the unaddressed menu synching tickets around pushing them to later milestones so that the ideas are not lost. We may not implement them soon but a day may come where they will be more relevant.<br />
</p>

    </div>

              </div>
              <div class="change" id="trac-change-4">
                <h3 class="change">
                  <span class="threading">
                    <span id="comment:4" class="cnum">
      <a href="#comment:4">comment:4</a>
    </span>
                  </span>
                  Changed 2012-06-26T10:56:32-05:00 by bdezonia
                </h3>
                
  <ul class="changes">
    <li>
      <strong>Status</strong>
        changed from <em>new</em> to <em>closed</em>
    </li><li>
      <strong>Resolution</strong>
        set to <em>fixed</em>
    </li>
  </ul>
    <div class="comment searchable">
      
      <p>
We've gone forward with a single menu bar approach.<br />
</p>

    </div>

              </div>
          </div>
        </div>
    </div>
    </div>
  </body>
</html>
